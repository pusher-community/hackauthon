<!DOCTYPE html>
<head>
  <title>Pusher Test</title>
  <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="//js.pusher.com/2.2/pusher.js" type="text/javascript"></script>
  <script type="text/javascript">

    // Pusher.log = function(message) {
    //   if (window.console && window.console.log) {
    //     window.console.log(message);
    //   }
    // };


    var pusher = new Pusher('235ba307396082ec6719', {
      authEndpoint: "http://localhost:9090/pusher/auth",
      auth: {
        params: {
          user_id: "bar",
          user_info: JSON.stringify({twitter: "yolo"})
        }
      }
    });

    var privateChannel = pusher.subscribe('private-channel');

    var presenceChannel = pusher.subscribe('presence-test-channel');

    presenceChannel.bind('pusher:subscription_succeeded', function(members){
      console.log("Subscribed to presence channel!");
      console.log(members.me)
    });

    setTimeout(function(){
        presenceChannel.trigger('client-woot', {hello: 'world'})
        privateChannel.trigger('client-yolo', {yolo: 'woot'})
    }, 1000)

    var exclusionChannel = pusher.subscribe("exclusion");

    exclusionChannel.bind('event', function(){
      console.log("not excluded :(")
    });




  </script>
</head>

<body>
  
  <h2>Yolo</h2>

</body>